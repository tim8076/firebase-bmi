{"version":3,"sources":["all.js"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","appId","initializeApp","firebase","ref","bmiRef","database","heightInput","document","querySelector","weightInput","sendButton","resultArea","resultCircle","countBmi","weight","height","Math","pow","toFixed","setDataToFirebase","data","push","bmiStatus","bmi","status","text","renderList","snapshot","str","item","val","date","_bmiStatus","concat","key","resultList","innerHTML","renderResultCircle","e","preventDefault","target","parentElement","matches","value","classList","remove","addEventListener","alert","parseInt","trim","Date","toLocaleDateString","add","dataset","child","on"],"mappings":"aACA,IAAMA,OAAS,CADfC,OAAA,0CACAC,WAAe,gCACbD,YAAQ,oDACRC,UAAU,gBACVC,cAAa,4BACbC,kBAAW,eACXC,MAAAA,6CAEAC,SAAOC,cAAAP,QAETQ,IAAAA,OAASD,SAAcP,WAAvBS,IAAA,OAEMC,YAASF,SAASG,cAAxB,WACMC,YAAcC,SAASC,cAAc,WACrCC,WAAcF,SAASC,cAAc,eACrCE,WAAaH,SAASC,cAAc,gBACpCG,aAAaJ,SAASC,cAAc,WACpCI,WAAeL,SAASC,cAAc,SAI5C,SAASK,SAASC,EAAQC,GAExB,OADYD,EAASE,KAAKC,IAAIF,EAAS,IAAvC,IACWG,QAAQ,GAGrB,SAASC,kBAAkBC,GACzBhB,OAAOiB,KAAKD,GAGd,SAASE,UAAUC,GACjB,OAAIA,EAAM,KACD,CAAAC,OAAA,cAAAC,KAAA,MAAU,MAAFF,GAARA,EAAA,GAA6B,CAAEC,OAAA,SAAAC,KAAA,QAAtC,IAAAF,GAAAA,EAAA,GACK,CAAIA,OAAO,aAAcE,KAAI,MAC3B,IAAAF,GAAAA,EAAA,GAAEC,CAAMA,OAAE,cAAVC,KAAA,QAA0B,IAAAF,GAAAA,EAAA,GAAjC,CAAAC,OAAA,UAAAC,KAAA,QACgB,IAAPF,EACF,CAAAC,OAAA,gBAAAC,KAAA,aADF,EAEN,SAAMC,WAAWC,GAChB,IAAAC,EAAO,GAAEJ,EAAAA,QAAQ,SAAAK,GAAeJ,IAAAA,EAAMI,EAAAC,MAAAf,EAANU,EAAMV,OAAAD,EAANW,EAAMX,OAAAS,EAANE,EAAMF,IAAAQ,EAANN,EAAMM,KAA/BC,EAAPV,UAAAC,GAAAE,EAAOO,EAAPP,KAAAD,EAAOQ,EAAPR,OADKI,GAAA,oDAAAK,OAGER,EAHF,wCAAAQ,OAG6BT,EAH7B,yEAAAS,OAKEV,EALF,sFAAAU,OAMNnB,EANM,wFAAAmB,OAUGlB,EAVH,gDAAAkB,OAYqCF,EAZrC,4DAAAE,OAYLJ,EAAAK,IAZK,yEAaLC,WAAAC,UAAyBd,EA0B7B,SAASe,mBAAmBd,GAzBxBK,IAAAA,EAAGN,UAAAC,GAAAE,EAAHG,EAAGH,KAAAD,EAAHI,EAAGJ,OAqBJZ,aAxBDwB,UAwBC,8BAAAH,OACDT,EADC,uCAAAS,OAEFV,EAFE,wLAAAU,OAcyBT,EAdzB,cAAAS,OAMDrB,EANC,cAqBD0B,aAAEC,iBAAF,QAAA,SAAAD,GAAAA,EAAEC,iBACED,EAAEE,OAAOC,cAAcC,QAAQ,gBACjCpC,YAAYqC,MAAQ,GACpBlC,YAAYkC,MAAQ,GACpBhC,WAAWiC,UAAUC,OAAO,aAIhCnC,WAAWoC,iBAAiB,QAAS,SAAAR,GACnC,IAAKhC,YAAYqC,QAAUlC,YAAYkC,MAAO,OAAOI,MAAM,WAC3D,IAAMhC,EAASiC,SAAS1C,YAAYqC,MAAMM,QACpCnC,EAASkC,SAASvC,YAAYkC,MAAMM,QACpC1B,EAAMV,SAASC,EAAQC,GAQ7BI,kBANa,CACXJ,OAAAA,EACAD,OAAAA,EACAS,IAAAA,EACAQ,MALW,IAAImB,MAAOC,uBAQxBxC,WAAWiC,UAAUQ,IAAI,UACzBf,mBAAmBd,KAKnBY,WAAMK,iBAAF,QAA+B,SAAAF,GAC/BC,EAAAA,OAAAA,cAAFG,QAAA,oBACAJ,EAAAC,iBACML,EAANI,EAAaJ,OAAKW,cAAlBQ,QAAAnB,IACD9B,OAAAkD,MAAApB,GAAAW,YAKFzC,OAFDmD,GAAA,QAAA,SAAA5B,GACED,WAAWC","file":"all.js","sourcesContent":["// firebase config\r\nconst config = {\r\n  apiKey: \"AIzaSyABM_jhhuYOR1LTYl2vO_PlVaSv76vcnk0\",\r\n  authDomain: \"project-fb4ac.firebaseapp.com\",\r\n  databaseURL: \"https://project-fb4ac-default-rtdb.firebaseio.com\",\r\n  projectId: \"project-fb4ac\",\r\n  storageBucket: \"project-fb4ac.appspot.com\",\r\n  messagingSenderId: \"132534835636\",\r\n  appId: \"1:132534835636:web:51b9521c9a0f299c457ae1\"\r\n};\r\nfirebase.initializeApp(config);\r\n\r\nconst bmiRef = firebase.database().ref('bmi');\r\nconst heightInput = document.querySelector('#height');\r\nconst weightInput = document.querySelector('#weight');\r\nconst sendButton = document.querySelector('.result-btn');\r\nconst resultArea = document.querySelector('#result-area');\r\nconst resultCircle = document.querySelector('.result');\r\nconst resultList = document.querySelector('.list');\r\n\r\n\r\nfunction countBmi(weight, height) {\r\n  const bmi = weight / Math.pow(height / 100, 2);\r\n  return bmi.toFixed(2);\r\n}\r\n\r\nfunction setDataToFirebase(data) {\r\n  bmiRef.push(data);\r\n}\r\n\r\nfunction bmiStatus(bmi) {\r\n  if (bmi < 18.5) {\r\n    return { status: 'underWeight', text: '過輕' }\r\n  } else if (bmi >= 18.5 && bmi < 24) {\r\n    return { status: 'normal', text: '體重正常' }\r\n  } else if (bmi >= 24 && bmi < 27) {\r\n    return { status: 'overWeight', text: '過重' }\r\n  } else if (bmi >= 27 && bmi < 30) {\r\n    return { status: 'mildObesity', text: '輕度肥胖' }\r\n  } else if (bmi >= 30 && bmi < 35) {\r\n    return { status: 'obesity', text: '中度肥胖' }\r\n  } else if (bmi >= 35 ) {\r\n    return { status: 'severeObesity', text: '重度肥胖' }\r\n  }\r\n}\r\n\r\nfunction renderList(snapshot) {\r\n  let str = '';\r\n  snapshot.forEach((item) => {\r\n    const { height, weight, bmi, date } = item.val();\r\n    const { text, status } = bmiStatus(bmi);\r\n    str += \r\n    `<li class=\"list-item\">\r\n      <h2 class=\"status\">${text}</h2>\r\n      <div class=\"status-bar ${status}\"></div>\r\n      <div class=\"number\">\r\n        <p>BMI</p>\r\n        <p>${bmi}</p>\r\n      </div>\r\n      <div class=\"number\">\r\n        <p>weight</p>\r\n        <p>${weight}kg</p>\r\n      </div>\r\n      <div class=\"number\">\r\n        <p>height</p>\r\n        <p>${height}cm</p>\r\n      </div>\r\n      <p class=\"date\">${date}</p>\r\n      <a href=\"#\" class=\"delete-button\" data-key=\"${item.key}\">\r\n        <i class=\"fas fa-trash-alt\"></i>\r\n      </a>\r\n    </li>`\r\n  })\r\n  resultList.innerHTML = str;\r\n}\r\n\r\nfunction renderResultCircle(bmi) {\r\n  const { text, status } = bmiStatus(bmi);\r\n  resultCircle.innerHTML = \r\n  ` <div class=\"result-circle ${status}\">\r\n      <p class=\"result-number\">${bmi}</p>\r\n      <span>BMI</span>\r\n      <a href=\"#\" class=\"loop-icon\">\r\n        <img src=\"./images/icons_loop.png\" alt=\"icons_loop\">\r\n      </a>\r\n    </div>\r\n    <p class=\"result-text ${status}\">\r\n      ${ text }\r\n    </p>`\r\n}\r\n\r\n// 重置按鈕\r\nresultCircle.addEventListener('click', function(e) {\r\n  e.preventDefault();\r\n  if (e.target.parentElement.matches('.loop-icon')) {\r\n    heightInput.value = '';\r\n    weightInput.value = '';\r\n    resultArea.classList.remove('active');\r\n  }\r\n})\r\n// 送出按鈕\r\nsendButton.addEventListener('click', function(e) {\r\n  if (!heightInput.value || !weightInput.value) return alert('欄位未填寫完畢');\r\n  const height = parseInt(heightInput.value.trim());\r\n  const weight = parseInt(weightInput.value.trim());\r\n  const bmi = countBmi(weight, height);\r\n  const date = new Date().toLocaleDateString();\r\n  const data = {\r\n    height,\r\n    weight,\r\n    bmi,\r\n    date\r\n  }\r\n  setDataToFirebase(data);\r\n  resultArea.classList.add('active');\r\n  renderResultCircle(bmi);\r\n});\r\n\r\n// 刪除單筆資料\r\nresultList.addEventListener('click', function(e) {\r\n  if (e.target.parentElement.matches('.delete-button')) {\r\n    e.preventDefault();\r\n    const key = e.target.parentElement.dataset.key;\r\n    bmiRef.child(key).remove();\r\n  }\r\n})\r\n\r\nbmiRef.on('value', function(snapshot) {\r\n  renderList(snapshot);\r\n})\r\n\r\n\r\n\r\n"]}